FROM alpine:3.7

# Our makefiles expect OSTYPE to be defined as below
ENV OSTYPE=linux-alpine

RUN apk add --no-cache alpine-sdk cmake openssh linux-headers expat-dev jansson-dev yaml-dev openssl curl-dev libmicrohttpd-dev \
    && cd / \
    && git clone https://github.com/bitdribble/bitdribble.git \
    && mkdir bitdribble/build && cd bitdribble/build \
    && cmake .. \
    && make -j 4 \
    && make install    

ENTRYPOINT ["sh"]
CMD []
